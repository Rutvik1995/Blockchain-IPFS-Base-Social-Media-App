{"ast":null,"code":"import _toConsumableArray from \"/Users/rutvikpatel/Desktop/Project/BlockChainApp/BlockChainWithIPFS/starter_kit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/rutvikpatel/Desktop/Project/BlockChainApp/BlockChainWithIPFS/starter_kit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/rutvikpatel/Desktop/Project/BlockChainApp/BlockChainWithIPFS/starter_kit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/rutvikpatel/Desktop/Project/BlockChainApp/BlockChainWithIPFS/starter_kit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/Users/rutvikpatel/Desktop/Project/BlockChainApp/BlockChainWithIPFS/starter_kit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/rutvikpatel/Desktop/Project/BlockChainApp/BlockChainWithIPFS/starter_kit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"/Users/rutvikpatel/Desktop/Project/BlockChainApp/BlockChainWithIPFS/starter_kit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/rutvikpatel/Desktop/Project/BlockChainApp/BlockChainWithIPFS/starter_kit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/rutvikpatel/Desktop/Project/BlockChainApp/BlockChainWithIPFS/starter_kit/src/components/login.js\";\nimport React, { Component } from 'react'; //import logo from '../logo.png';\n\nimport Web3 from 'web3';\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport Jumbotron from 'react-bootstrap/Jumbotron';\nimport './App.css';\nimport Meme from '../abis/Meme.json';\nimport { MDBCol, MDBInput } from \"mdbreact\";\nimport { Crypt, RSA } from 'hybrid-crypto-js';\nimport Feed from './Feed.js';\nimport { Form, Button, FormGroup, FormControl, ControlLabel, Card, ButtonToolbar } from \"react-bootstrap\";\n\nvar ipfsClient = require('ipfs-http-client');\n\nvar ipfs = ipfsClient({\n  host: 'ipfs.infura.io',\n  port: '5001',\n  protocol: 'https'\n});\nvar crypt = new Crypt();\nvar rsa = new RSA();\n\nvar login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(login, _Component);\n\n  _createClass(login, [{\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.loadWeb3();\n\n              case 2:\n                _context.next = 4;\n                return this.loadBlockChainData();\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }]);\n\n  function login(props) {\n    var _this;\n\n    _classCallCheck(this, login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(login).call(this, props));\n\n    _this.pausecomp = function (millis) {\n      var date = new Date();\n      var curDate = null;\n\n      do {\n        curDate = new Date();\n      } while (curDate - date < millis);\n    };\n\n    _this.login = function () {\n      console.log(\"login\");\n      var userLogin = document.getElementById(\"email\").value;\n\n      for (var i = 0; i < _this.state.userInformationListFromBlockChain.length; i++) {\n        if (_this.state.userInformationListFromBlockChain[i].userEmailId == userLogin) {\n          console.log(\"same\");\n\n          _this.setState({\n            userEmailId: _this.state.userInformationListFromBlockChain[i].userEmailId\n          });\n\n          console.log(_this.state.userBlockchainResultOfParticularUser);\n          console.log(_this.state.userInformationListFromBlockChain[i]);\n          console.log(_this.state.userInformationListFromBlockChain[i][0].toString());\n          console.log(_this.state.userInformationListFromBlockChain[i][1]);\n          console.log(_this.state.userInformationListFromBlockChain[i][3]);\n          var userBlockchainHash = {\n            userId: _this.state.userInformationListFromBlockChain[i][0].toString(),\n            userHash: _this.state.userInformationListFromBlockChain[i][2],\n            userPublicKey: _this.state.userInformationListFromBlockChain[i][3] //userPublicKey:this.state.userInformationListFromBlockChain[i][0]\n\n          };\n          console.log(userBlockchainHash);\n          console.log(\"check\");\n\n          _this.setState({\n            userBlockchainResultOfParticularUser: userBlockchainHash\n          });\n\n          ipfs.get(\"/ipfs/\" + _this.state.userInformationListFromBlockChain[i].userHash, function (error, result) {\n            // console.log(result);\n            var uint8array = new TextEncoder(\"utf-8\").encode(\"¢\");\n            var UserStringResult = new TextDecoder(\"utf-8\").decode(result[0].content); //console.log(UserStringResult);\n\n            var userJsonResult = JSON.parse(UserStringResult); // console.log(userJsonResult);\n\n            _this.setState({\n              userJsonResultOfParticularUserFromIPFS: userJsonResult\n            });\n\n            _this.setState({\n              fullName: userJsonResult.fullName\n            });\n\n            _this.onToMainMenu();\n          });\n          console.log(\"after IPFS function\");\n        }\n      }\n    };\n\n    _this.onToMainMenu = function () {\n      _this.pausecomp(2000);\n\n      console.log(\"In Main Menu\");\n      console.log(_this.state.userEmailId);\n      console.log(_this.state.userBlockchainResultOfParticularUser);\n\n      _this.props.history.push({\n        pathname: '/MainPage',\n        userEmailId: _this.state.userEmailId,\n        fullName: _this.state.fullName,\n        userJsonResultOfParticularUserFromIPFS: _this.state.userJsonResultOfParticularUserFromIPFS,\n        totalUser: _this.state.userInformationListFromBlockChain,\n        userBlockchainResultOfParticularUser: _this.state.userBlockchainResultOfParticularUser,\n        requestNotAccepted: [],\n        request: [] // your data array of objects\n\n      });\n    };\n\n    _this.CreateAccountPage = function () {\n      _this.props.history.push({\n        pathname: '/register'\n      });\n    };\n\n    _this.pausecomp = function (millis) {\n      var date = new Date();\n      var curDate = null;\n\n      do {\n        curDate = new Date();\n      } while (curDate - date < millis);\n    };\n\n    _this.state = {\n      account: '',\n      buffer: null,\n      Contract: null,\n      userEmailId: '',\n      userInformationListFromBlockChain: '',\n      fullName: '',\n      userJsonResultOfParticularUserFromIPFS: '',\n      userBlockchainResultOfParticularUser: null\n    };\n    return _this;\n  }\n\n  _createClass(login, [{\n    key: \"loadWeb3\",\n    value: function () {\n      var _loadWeb = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!window.ethereum) {\n                  _context2.next = 4;\n                  break;\n                }\n\n                window.web3 = new Web3(window.ethereum);\n                _context2.next = 4;\n                return window.ethereum.enable();\n\n              case 4:\n                if (window.web3) {\n                  window.web3 = new Web3(window.web3.currentProvider);\n                } else {\n                  window.alert(\"Please use metamask\");\n                }\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function loadWeb3() {\n        return _loadWeb.apply(this, arguments);\n      }\n\n      return loadWeb3;\n    }()\n  }, {\n    key: \"loadBlockChainData\",\n    value: function () {\n      var _loadBlockChainData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var web3_2, accounts, networkId, networkdata, abi, address, contract, tt, userCount, i, userInformationListFromBlockChain;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                console.log(\"load Blockchain load data\");\n                web3_2 = window.web3;\n                _context3.next = 4;\n                return web3_2.eth.getAccounts();\n\n              case 4:\n                accounts = _context3.sent;\n                console.log(accounts);\n                this.setState({\n                  account: accounts[0]\n                });\n                console.log(this.state);\n                _context3.next = 10;\n                return web3_2.eth.net.getId();\n\n              case 10:\n                networkId = _context3.sent;\n                console.log(networkId);\n                networkdata = Meme.networks[networkId];\n\n                if (!networkdata) {\n                  _context3.next = 37;\n                  break;\n                }\n\n                abi = Meme.abi;\n                address = networkdata.address; //fetch the contract \n\n                contract = web3_2.eth.Contract(abi, address);\n                console.log(contract);\n                this.setState({\n                  contract: contract\n                });\n                console.log(contract.methods);\n                _context3.next = 22;\n                return this.state.contract.methods.userCount().call();\n\n              case 22:\n                tt = _context3.sent;\n                _context3.next = 25;\n                return tt;\n\n              case 25:\n                userCount = _context3.sent;\n                i = 1;\n\n              case 27:\n                if (!(i <= userCount)) {\n                  _context3.next = 35;\n                  break;\n                }\n\n                _context3.next = 30;\n                return this.state.contract.methods.userInformation(i).call();\n\n              case 30:\n                userInformationListFromBlockChain = _context3.sent;\n                this.setState({\n                  userInformationListFromBlockChain: [].concat(_toConsumableArray(this.state.userInformationListFromBlockChain), [userInformationListFromBlockChain])\n                });\n\n              case 32:\n                i++;\n                _context3.next = 27;\n                break;\n\n              case 35:\n                _context3.next = 38;\n                break;\n\n              case 37:\n                window.alert(\"Smart contract not deployed to detected the network\");\n\n              case 38:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function loadBlockChainData() {\n        return _loadBlockChainData.apply(this, arguments);\n      }\n\n      return loadBlockChainData;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row pt-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12 \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"site-logo text-center \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Welcome\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }), React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(Card.Header, {\n        as: \"h5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"Login\"), React.createElement(Card.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"Email address\"), React.createElement(Form.Control, {\n        type: \"email\",\n        id: \"email\",\n        placeholder: \"Enter email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }), React.createElement(Form.Group, {\n        controlId: \"formBasicPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"Password\"), React.createElement(Form.Control, {\n        type: \"password\",\n        id: \"password\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"outline-primary\",\n        onClick: this.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"Log In\")), React.createElement(\"div\", {\n        className: \"col-sm-10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"outline-secondary\",\n        onClick: this.CreateAccountPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \"Create Account\"))))))));\n    }\n  }]);\n\n  return login;\n}(Component);\n\nexport default login;","map":{"version":3,"sources":["/Users/rutvikpatel/Desktop/Project/BlockChainApp/BlockChainWithIPFS/starter_kit/src/components/login.js"],"names":["React","Component","Web3","BrowserRouter","Route","Jumbotron","Meme","MDBCol","MDBInput","Crypt","RSA","Feed","Form","Button","FormGroup","FormControl","ControlLabel","Card","ButtonToolbar","ipfsClient","require","ipfs","host","port","protocol","crypt","rsa","login","loadWeb3","loadBlockChainData","props","pausecomp","millis","date","Date","curDate","console","log","userLogin","document","getElementById","value","i","state","userInformationListFromBlockChain","length","userEmailId","setState","userBlockchainResultOfParticularUser","toString","userBlockchainHash","userId","userHash","userPublicKey","get","error","result","uint8array","TextEncoder","encode","UserStringResult","TextDecoder","decode","content","userJsonResult","JSON","parse","userJsonResultOfParticularUserFromIPFS","fullName","onToMainMenu","history","push","pathname","totalUser","requestNotAccepted","request","CreateAccountPage","account","buffer","Contract","window","ethereum","web3","enable","currentProvider","alert","web3_2","eth","getAccounts","accounts","net","getId","networkId","networkdata","networks","abi","address","contract","methods","userCount","call","tt","userInformation"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n//import logo from '../logo.png';\nimport Web3 from 'web3';\nimport {BrowserRouter,Route} from 'react-router-dom';\nimport Jumbotron from 'react-bootstrap/Jumbotron'\nimport './App.css';\nimport Meme from '../abis/Meme.json';\nimport { MDBCol, MDBInput } from \"mdbreact\";\nimport { Crypt, RSA } from 'hybrid-crypto-js';\nimport Feed  from './Feed.js';\nimport { Form, Button, FormGroup, FormControl, ControlLabel,Card,ButtonToolbar } from \"react-bootstrap\";\nvar ipfsClient = require('ipfs-http-client');\nvar ipfs = ipfsClient({host:'ipfs.infura.io',port:'5001',protocol: 'https' }) ;\nvar crypt = new Crypt();\nvar rsa = new RSA();\n\nclass login extends Component {\n\n    async componentWillMount(){\n     \n      await this.loadWeb3();\n      await this.loadBlockChainData();\n    }\n    constructor(props){\n      super(props);\n      this.state={\n        account:'',\n        buffer:null,\n        Contract:null,\n        userEmailId:'',\n        userInformationListFromBlockChain:'',\n        fullName:'',\n        userJsonResultOfParticularUserFromIPFS:'',\n        userBlockchainResultOfParticularUser:null\n      };\n\n    }\n\n \n    \n\n    async loadWeb3(){\n      if(window.ethereum){\n        window.web3 =new Web3(window.ethereum);\n        await window.ethereum.enable();\n      }\n      if(window.web3){\n        window.web3 = new Web3(window.web3.currentProvider);\n      }\n      else{\n        window.alert(\"Please use metamask\");\n      }\n    }\n\n\n    async loadBlockChainData(){\n        console.log(\"load Blockchain load data\");\n        const web3_2 = window.web3;\n        const accounts =  await web3_2.eth.getAccounts();\n        console.log(accounts);\n        this.setState({account:accounts[0]});\n        console.log(this.state);\n        const networkId = await web3_2.eth.net.getId();\n        console.log(networkId);\n        const networkdata= Meme.networks[networkId];\n        if(networkdata){\n          const abi =Meme.abi;\n          const address = networkdata.address;\n          //fetch the contract \n          const contract = web3_2.eth.Contract(abi,address);\n          console.log(contract);\n          this.setState({contract:contract});\n          console.log(contract.methods);\n          var tt= await this.state.contract.methods.userCount().call();\n          var userCount=await tt;\n          for(var i=1;i<=userCount;i++){\n            const userInformationListFromBlockChain= await this.state.contract.methods.userInformation(i).call();\n            this.setState({\n              userInformationListFromBlockChain:[...this.state.userInformationListFromBlockChain, userInformationListFromBlockChain]\n            })\n          }\n        //  const MemeHash =await contract.methods.get().call();\n         // console.log(MemeHash);\n        }\n        else{\n          window.alert(\"Smart contract not deployed to detected the network\");\n        }\n      }\n      pausecomp=(millis)=>{\n        var date = new Date();\n        var curDate = null;\n        do { curDate = new Date(); }\n        while(curDate-date < millis);\n       }\n\n      login=()=>{\n        console.log(\"login\");\n        var userLogin=document.getElementById(\"email\").value;\n        for(var i=0;i<this.state.userInformationListFromBlockChain.length;i++){\n         if(this.state.userInformationListFromBlockChain[i].userEmailId==userLogin){\n          console.log(\"same\");\n          this.setState({userEmailId:this.state.userInformationListFromBlockChain[i].userEmailId});\n          \n         console.log(this.state.userBlockchainResultOfParticularUser);\n          console.log(this.state.userInformationListFromBlockChain[i]);\n\n          console.log(this.state.userInformationListFromBlockChain[i][0].toString());\n          console.log(this.state.userInformationListFromBlockChain[i][1])\n          console.log(this.state.userInformationListFromBlockChain[i][3]);\n       \n          var userBlockchainHash={\n            userId:this.state.userInformationListFromBlockChain[i][0].toString(),\n            userHash:this.state.userInformationListFromBlockChain[i][2],\n            userPublicKey:this.state.userInformationListFromBlockChain[i][3],\n            //userPublicKey:this.state.userInformationListFromBlockChain[i][0]\n          }\n          console.log(userBlockchainHash);\n          console.log(\"check\");\n          this.setState({userBlockchainResultOfParticularUser:userBlockchainHash})\n\n\n          ipfs.get(\"/ipfs/\"+this.state.userInformationListFromBlockChain[i].userHash,(error,result)=>{\n           // console.log(result);\n            var uint8array = new TextEncoder(\"utf-8\").encode(\"¢\");\n            var UserStringResult = new TextDecoder(\"utf-8\").decode(result[0].content);\n            //console.log(UserStringResult);\n            var userJsonResult = JSON.parse(UserStringResult);\n           // console.log(userJsonResult);\n            this.setState({userJsonResultOfParticularUserFromIPFS:userJsonResult});\n            this.setState({fullName:userJsonResult.fullName});\n            this.onToMainMenu()\n            });\n          console.log(\"after IPFS function\");    \n         }\n      \n      }\n    }\n    onToMainMenu=()=>{\n      this.pausecomp(2000);\n      console.log(\"In Main Menu\");\n      console.log(this.state.userEmailId);\n      console.log(this.state.userBlockchainResultOfParticularUser);\n          this.props.history.push({\n            pathname: '/MainPage',\n            userEmailId:this.state.userEmailId,\n            fullName:this.state.fullName,\n            userJsonResultOfParticularUserFromIPFS:this.state.userJsonResultOfParticularUserFromIPFS,\n            totalUser:this.state.userInformationListFromBlockChain,\n            userBlockchainResultOfParticularUser:this.state.userBlockchainResultOfParticularUser,\n            requestNotAccepted:[],\n            request:[]\n              // your data array of objects\n          })\n    }\n    CreateAccountPage=()=>{\n      this.props.history.push({\n        pathname: '/register',})\n    }\n    pausecomp=(millis)=>{\n        var date = new Date();\n        var curDate = null;\n        do { curDate = new Date(); }\n        while(curDate-date < millis);\n       }\n\n\n       render() {\n        return(\n            <div className=\"container\">\n               <div className=\"row pt-5\">\n                <div className=\"col-12 \">\n                <h1 className=\"site-logo text-center \">Welcome</h1>\n                <hr></hr>\n                <Card>\n                    <Card.Header as=\"h5\">Login</Card.Header>\n                    <Card.Body>\n                        <Form.Label>Email address</Form.Label>\n                        <Form.Control type=\"email\"  id=\"email\"  placeholder=\"Enter email\" />   \n                        <Form.Group controlId=\"formBasicPassword\">\n                            <br></br>\n                        <Form.Label>Password</Form.Label>\n                        <Form.Control type=\"password\" id=\"password\" placeholder=\"Password\" />\n                        </Form.Group>                               \n                        <div className=\"row\">\n                            <div className=\"col-sm-2\">\n                            <Button variant=\"outline-primary\"  onClick={this.login}>Log In</Button>\n                            </div>\n                            <div className=\"col-sm-10\">\n                            <Button variant=\"outline-secondary\" onClick={this.CreateAccountPage}>Create Account</Button>\n                            </div>\n                        </div>    \n\n                    </Card.Body>\n                </Card>\n               \n                </div>\n               </div>\n            </div>\n        );\n    }\n}\n\nexport default login;"]},"metadata":{},"sourceType":"module"}